@{
    ViewData["Title"] = "Customer";
}

<style>
    .form-group {
        display: flex;
        margin-bottom: 10px;
    }

        .form-group label {
            width: 150px;
            margin-right: 10px;
            text-align: right;
        }

        .form-group input {
            flex: 1;
        }

    /* Add any additional styling here */
</style>

<body>
    <h2>Customer Information Form</h2>
    <form id="Record Form">
        <div class="form-group">
            <label for="popupName">Name:</label>
            <input type="text" id="popupName" name="popupName" required />
            <label for="popupGender">Gender:</label>
            <input type="text" id="popupGender" name="popupGender" />
        </div>

        <div class="form-group">
            <label for="popupDateOfBirth">Date of Birth:</label>
            <input type="date" id="popupDateOfBirth" name="popupDateOfBirth" />
            <label for="popupMaritalStatus">Marital Status:</label>
            <input type="text" id="popupMaritalStatus" name="popupMaritalStatus" />
        </div>

        <div class="form-group">
            <label for="popupChildren">Children:</label>
            <input type="number" id="popupChildren" name="popupChildren" />

            <label for="popupContactNo">Contact No:</label>
            <input type="number" id="popupContactNo" name="popupContactNo" />
        </div>
        <div class="form-group">
            <label for="popupTenancyBegan">Tenancy Began:</label>
            <input type="date" id="popupTenancyBegan" name="popupTenancyBegan" />

            <label for="popupNationality">Nationality:</label>
            <input type="text" id="popupNationality" name="popupNationality" />
        </div>
        <div class="form-group">
            <label for="popupHomeTown">HomeTown:</label>
            <input type="text" id="popupHomeTown" name="popupHomeTown" />

            <label for="popupOccupation">Occupation:</label>
            <input type="text" id="popupOccupation" name="popupOccupation" />
        </div>
        <hr />
        <h1>Mother's Details</h1>
        <div class="form-group">

            <label for="popupMName">Name:</label>
            <input type="text" id="popupMName" name="popupMName" />
            <label for="popupMAddress">Address:</label>
            <input type="text" id="popupMAddress" name="popupMAddress" />
        </div>
        <div class="form-group">

            <label for="popupMContactNo">Contact No:</label>
            <input type="number" id="popupMContactNo" name="popupMContactNo" />
            <label for="popupMOccupation">Occupation:</label>
            <input type="text" id="popupMOccupation" name="popupMOccupation" />
        </div>
        <hr />
        <h1>Father's Details</h1>
        <div class="form-group">


            <label for="popupFName">Name:</label>
            <input type="text" id="popupFName" name="popupFName" />
            <label for="popupFAddress">Address:</label>
            <input type="text" id="popupFAddress" name="popupFAddress" />
        </div>
        <div class="form-group">


            <label for="popupFContactNo">Contact No:</label>
            <input type="number" id="popupFContactNo" name="popupFContactNo" />
            <label for="popupFOccupation">Occupation:</label>
            <input type="text" id="popupFOccupation" name="popupFOccupation" />
        </div>
        <hr />
        <h1>Employee's Details</h1>
        <div class="form-group">

            <label for="popupEName">Name:</label>
            <input type="text" id="popupEName" name="popupEName" />
            <label for="popupEAddress">Address:</label>
            <input type="text" id="popupEAddress" name="popupEAddress" />
        </div>
        <div class="form-group">


            <label for="popupEContactNo">Contact No:</label>
            <input type="number" id="popupEContactNo" name="popupEContactNo" />

            <label for="popupEPosition">Position:</label>
            <input type="text" id="popupEPosition" name="popupEPosition" />
        </div>

        <hr />
        <h1>In Case Of Emergency Contact</h1>
        <div class="form-group">


            <label for="popupUName">Name:</label>
            <input type="text" id="popupUName" name="popupUName" />
            <label for="popupUAddress">Address:</label>
            <input type="text" id="popupUAddress" name="popupUAddress" />
        </div>
        <div class="form-group">
            <label for="popupUContactNo">Contact No:</label>
            <input type="number" id="popupUContactNo" name="popupUContactNo" />
            <label for="popupUOccupation">Occupation:</label>
            <input type="text" id="popupUOccupation" name="popupUOccupation" />
        </div>
        <div class="form-group">
            <label for="popupRelation">Relation:</label>
            <input type="text" id="popupURelation" name="popupUContactNo" />

        </div>
        <div class="text-end">
            <button class="btn btn-primary" id="AddCustomerBTN" onclick="saveCustomer();">Create</button>
        </div>
    </form>

</body>
<script>
    function saveCustomer() {
        alert("Save Customer");
        //var customerData = {
        //    _Name: $('#popupName').val(),
        //    _Gender: $('#popupGender').val(),
        //    _DateOfBirth: $('#popupDateOfBirth').val(),
        //    _MaritalStatus: $('#popupMaritalStatus').val(),
        //    _Children: $('#popupChildren').val(),
        //    _ContactNo: $('#popupContactNo').val(),
        //    _TenancyBegan: $('#popupTenancyBegan').val(),
        //    _Nationality: $('#popupNationality').val(),
        //    _HomeTown: $('#popupHomeTown').val(),
        //    _Occupation: $('#popupOccupation').val(),
        //    _MName: $('#popupMName').val(),
        //    _MAddress: $('#popupMAddress').val(),
        //    _MContactNo: $('#popupMContactNo').val(),
        //    _MOccupation: $('#popupMOccupation').val(),
        //    _FName: $('#popupFName').val(),
        //    _FAddress: $('#popupFAddress').val(),
        //    _FContactNo: $('#popupFContactNo').val(),
        //    _FOccupation: $('#popupFOccupation').val(),
        //    _EName: $('#popupEName').val(),
        //    _EAddress: $('#popupEAddress').val(),
        //    _EContactNo: $('#popupEContactNo').val(),
        //    _EPosition: $('#popupEPosition').val(),
        //    _UName: $('#popupUName').val(),
        //    _UAddress: $('#popupUAddress').val(),
        //    _UContactNo: $('#popupUContactNo').val(),
        //    _UOccupation: $('#popupUOccupation').val(),
        //    _URelation: $('#popupURelation').val(),
        //    _TotalRent: null, // Replace with the actual value
        //    _TypeOfRent: null, // Replace with the actual value
        //    _NextDueDate: null // Replace with the actual value
        //};
        //console.log(customerData);
        //$.ajax({
        //    url: '/Customer/Create',
        //    type: 'POST',
        //    dataType: 'json',
        //    contentType: 'application/json',
        //    data: JSON.stringify(customerData),
        //    success: function () {
        //        // Handle success if needed
        //    },
        //    error: function (e) {
        //        console.log(e);
        //    }
        //});
        var name = $('#popupName').val();
        alert(name);
        var gender = $('#popupGender').val();
        var dateOfBirth = $('#popupDateOfBirth').val();
        var maritalStatus = $('#popupMaritalStatus').val();
        var children = $('#popupChildren').val();
        var contactNo = $('#popupContactNo').val();
        var tenancyBegan = $('#popupTenancyBegan').val();
        var nationality = $('#popupNationality').val();
        var homeTown = $('#popupHomeTown').val();
        var occupation = $('#popupOccupation').val();
        var mName = $('#popupMName').val();
        var mAddress = $('#popupMAddress').val();
        var mContactNo = $('#popupMContactNo').val();
        var mOccupation = $('#popupMOccupation').val();
        var fName = $('#popupFName').val();
        var fAddress = $('#popupFAddress').val();
        var fContactNo = $('#popupFContactNo').val();
        var fOccupation = $('#popupFOccupation').val();
        var eName = $('#popupEName').val();
        var eAddress = $('#popupEAddress').val();
        var eContactNo = $('#popupEContactNo').val();
        var ePosition = $('#popupEPosition').val();
        var uName = $('#popupUName').val();
        var uAddress = $('#popupUAddress').val();
        var uContactNo = $('#popupUContactNo').val();
        var uOccupation = $('#popupUOccupation').val();
        var relation = $('#popupURelation').val();

        //// Check if any field is empty
        ////if (!name || !gender || !dateOfBirth || !maritalStatus || !children || !contactNo || !tenancyBegan || !nationality || !homeTown || !occupation || !mName || !mAddress || !mContactNo || !mOccupation || !fName || !fAddress || !fContactNo || !fOccupation || !eName || !eAddress || !eContactNo || !ePosition || !uName || !uAddress || !uContactNo || !uOccupation || !relation) {
        ////    if (!name) alert('Please enter Name.');
        ////    if (!gender) alert('Please enter Gender.');
        ////    if (!dateOfBirth) alert('Please enter Date of Birth.');
        ////    if (!maritalStatus) alert('Please enter Marital Status.');
        ////    if (!children) alert('Please enter Children.');
        ////    if (!contactNo) alert('Please enter Contact No.');
        ////    if (!tenancyBegan) alert('Please enter Tenancy Began.');
        ////    if (!nationality) alert('Please enter Nationality.');
        ////    if (!homeTown) alert('Please enter HomeTown.');
        ////    if (!occupation) alert('Please enter Occupation.');
        ////    if (!mName) alert("Please enter Mother's Name.");
        ////    if (!mAddress) alert("Please enter Mother's Address.");
        ////    if (!mContactNo) alert("Please enter Mother's Contact No.");
        ////    if (!mOccupation) alert("Please enter Mother's Occupation.");
        ////    if (!fName) alert("Please enter Father's Name.");
        ////    if (!fAddress) alert("Please enter Father's Address.");
        ////    if (!fContactNo) alert("Please enter Father's Contact No.");
        ////    if (!fOccupation) alert("Please enter Father's Occupation.");
        ////    if (!eName) alert("Please enter Employee's Name.");
        ////    if (!eAddress) alert("Please enter Employee's Address.");
        ////    if (!eContactNo) alert("Please enter Employee's Contact No.");
        ////    if (!ePosition) alert("Please enter Employee's Position.");
        ////    if (!uName) alert("Please enter Emergency Contact Name.");
        ////    if (!uAddress) alert("Please enter Emergency Contact Address.");
        ////    if (!uContactNo) alert("Please enter Emergency Contact No.");
        ////    if (!uOccupation) alert("Please enter Emergency Contact Occupation.");
        ////    if (!relation) alert("Please enter Relation.");
        ////    return;
        ////}
        //alert(name);
        $.ajax({

            url: '/Customer/Create',
            type: 'POST',
            dataType: 'json',
            contentType: 'application/json',
            data: JSON.stringify({
                _Name: name,
                _Gender: gender,
                _DateOfBirth: dateOfBirth,
                _MaritalStatus: maritalStatus,
                _Children: children,
                _ContactNo: contactNo,
                _TenancyBegan: tenancyBegan,
                _Nationality: nationality,
                _HomeTown: homeTown,
                _Occupation: occupation,
                _MName: mName,
                _MAddress: mAddress,
                _MContactNo: mContactNo,
                _MOccupation: mOccupation,
                _FName: fName,
                _FAddress: fAddress,
                _FContactNo: fContactNo,
                _FOccupation: fOccupation,
                _EName: eName,
                _EAddress: eAddress,
                _EContactNo: eContactNo,
                _EPosition: ePosition,
                _UName: uName,
                _UAddress: uAddress,
                _UContactNo: uContactNo,
                _UOccupation: uOccupation,
                _URelation: relation
            }),
            success: function () {

            },
            error: function (e) {
                console.log(e);
            }
        });
    }

</script>


@*<style>
    .card {
        margin-bottom: 20px;
    }

    #IconButtonEdit{
      margin-left: 7px;
    }

    #IconButtonDel {
        margin-left: 7px;
    }
    #IconButtonRent{
        margin-left: 7px;
    }
    #mainheading{
        color: white;
    }
    #white{
        color: white;

    }

    .leftSpace{
        margin-left:2%;
    }
    .black{
        color:Black;
    }
 

 </style>      
<style type="text/css">
    @@media (max-width: 767px) {
        #mainheading {
            text-align: center;
        }

        .col-lg-2,
        .col-md-6,
        .col-12 {
            text-align: center;
            margin-bottom: 10px;
        }
        #startdate{
            margin-left: 0px;
        }
        .leftSpace {
            display: none;
        }
    }
    @@media (min-width: 992px) {
        #mainheading {
            text-align: left;
            color: white;
        }

        .col-lg-2,
        .col-md-6,
        .col-12 {
            text-align: left;
            margin-bottom: 0;
        }
        #startdate{
        margin-left: 20px;
        }
        .leftSpace {
            margin-left: 2%;
        }
    }

  
</style>*@
@*<div class="row">
    <div class="col-md-2">
        <h1>Customers</h1>
    </div>
</div>
<button class="btn btn-sm btn-primary m-2" id="addCustomerid" onclick="createCustomer();">+ New Customer</button>

<br /><br />
<div class="row" id="CustomerCardView">

    
</div>
<nav id="paginationContainer">
    <ul id="pagination" class="pagination justify-content-center"></ul>
</nav>
<div class="modal fade modal" id="createCustomerWindow">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="text-info modal-title text-black" id="Customerheading">Add Customer</h1>
                <button type="button" class="btn-close" aria-label="Close" onclick="closeModal();"></button>
               
            </div>
            <div class="modal-body">
                <div>
                    <form>
                        <div class="form-group">
                            <input type="hidden" id="popupId" class="form-control" disabled="disabled" autocomplete="off" />
                        </div>
                        <div class="form-group">
                            <label>Name</label>
                            <input placeholder="Name" id="popupName" class="form-control" autocomplete="off" />
                        </div><br />
                        <div class="form-group">
                            <label>Address</label>
                            <input placeholder="Address" id="popupAddress" class="form-control" autocomplete="off"/>
                        </div><br />
                        <div class="form-group">
                            <label>Contact Number</label>
                            <input type="tel" placeholder="Phone Number" id="popupContactNo" class="form-control" autocomplete="off"/>
                        </div><br />
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" placeholder="E-mail" id="popupEmail" class="form-control" autocomplete="off"/>
                        </div><br />
                        <div class="form-group">
                            <label>Total Rent</label>
                            <input type="number" placeholder="$" id="popupTotalRent" class="form-control" autocomplete="off" />
                        </div><br />
                        <div class="form-group">
                            <label>Rent Type</label>
                            <select class="form-control" name="project" id="popuprentType" autocomplete="off">
                                <option class="dropdown-item" value="monthly">Monthly</option>
                                <option class="dropdown-item" value="annually">Annually</option>
                            </select>
                        </div>
                    </form>
                </div>

                
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="AddCustomerBTN" onclick="saveCustomer();">Create</button>
                <button class="btn btn-warning" id="UpdateCustomerBTN" onclick="updateCustomer();" style="display:none">Update</button>
                <button class="btn btn-danger" id="CloseCustomerBTN" onclick="closeModal();" style="display:none">Close</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade modal" id="createCustomerWindowRent">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="text-info modal-title text-black" id="CustomerRentheading">Collect rent</h1>
                <button type="button" class="btn-close" aria-label="Close" onclick="closeModalRent();"></button>
         
            </div>
            <div class="modal-body">
                <div>
                    <form>
                        <div class="form-group">
                            <input type="hidden" id="popupId" class="form-control" disabled="disabled" autocomplete="off" />
                        </div>                     
                        <div class="form-group">
                            <h1 id ="popupAmount"></h1>
                        </div><br />
                        <div class="form-group">
                            <label>Payment Method</label>
                            <select class="form-control" name="project" id="popupPaymentType" autocomplete="off">
                                <option class="dropdown-item" value="Cash">Cash</option>
                                <option class="dropdown-item" value="Online">Online</option>
                            </select>
                        </div><br />
                        <div class="form-group">
                            <label>Payment Date</label>
                            <input type="date" placeholder="$" id="popupPaymentDate" class="form-control" autocomplete="off" />
                        </div><br />
                        <div class="form-group">
                            <label>Next Due Date</label>
                            <input type="date" placeholder="$" id="popupDueDate" class="form-control" autocomplete="off" />
                        </div>
                    </form>
                </div>


            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="AddCustomerBTN" onclick="saveRent();">Add Payment</button>
                <button class="btn btn-warning" id="UpdateCustomerBTN" onclick="updateCustomer();" style="display:none">Update</button>
                <button class="btn btn-danger" id="CloseCustomerBTN" onclick="closeModalRent();" style="display:none">Close</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade modal" id="createCustomerWindowDetails">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="text-info modal-title text-black" id="CustomerheadingDetails">Customer Details</h1>
                <button type="button" class="btn-close" aria-label="Close" onclick="closeModalDetails();"></button>
          
            </div>
            <div class="modal-body">
                <div>
                    <form>
                        <div class="form-group">
                            <input type="hidden" id="popupId" class="form-control" disabled="disabled" autocomplete="off" />
                        </div>
                        <div class="form-group">
                            <label id ="popupNameDetails"></label>
                           
                        </div><br />
                        <div class="form-group">
                            <label id="popupAddressDetails">Address</label>
                        </div><br />
                        <div class="form-group">
                            <label id="popupContactNoDetails">Contact Number</label>
                        </div><br />
                        <div class="form-group">
                            <label id="popupEmailDetails">Email</label>
                        </div><br />
                        <div class="form-group">
                            <label id="popupTotalRentDetails">Total Rent</label>
                           
                        </div><br />
                        <div class="form-group">
                            <label id="popuprentTypeDetails">Rent Type</label>

                        </div><br />
                        <div class="form-group">
                            <label id="popupDueDateDetails">Rent Type</label>

                        </div>
                    </form>
                </div>


            </div>
            <div class="modal-footer">
                <button class="btn btn-danger" id="CloseCustomerBTN" onclick="closeModalDetails();">Close</button>
            </div>
        </div>
    </div>
</div>*@
@*<script>
    $(document).ready(function () {
         CustomerShow();
    })

    var customerid;
    var Totalrent;
    
    function createCustomerRent(id,rent) {
        customerid = id;
        Totalrent = rent;

        cleartextboxRent(rent);
        $('#createCustomerWindowRent').modal('show');
    }
    function closeModalRent() {

        $('#createCustomerWindowRent').modal('hide');
    }
    function cleartextboxRent(rent) {
        //$('#popupId').val('');
        $('#popupAmount').text("Amount : $" + rent+"/-");
        $('#popupPaymentType').val('');
        $('#popupPaymentDate').val('');
    }

    function CustomerExport() {
        var startingDate = $('#startingDate').val();
        var endingDate = $('#endingDate').val();

        if (startingDate === "" || endingDate === "") {
            alert("Please enter both start date and end date.");
            return;
        }

        $.ajax({
            url: '/Customer/CustomerExport',
            type: 'GET',
            dataType: 'json',
            contentType: 'application/json;charset=utf-8;',
            data: {
                startingDate: startingDate,
                endingDate: endingDate
            },
            success: function (result) {
                var object = '';
                var count = 0;
                $.each(result, function (index, item) {
                    object += '<div class="col-md-3">';
                    object += '<div class="card">';
                    object += '<div class="card-body">';
                    object += '<div class="d-flex align-items-center">';
                    object += '<img src="/images/man.png" style="width: 30px; height: 30px;" />';
                    object += '<h5 class="card-title">' + item._Name + '</h5>';
                    object += '</div>';
                    object += '<p class="card-text">' + item._Email + '</p>';
                    object += '<a href="#" class="btn btn-primary" onclick="viewCustomer(' + item._id + ')"> + Details</a>';
                    object += '<a href="#" id="IconButtonEdit" class="btn btn-primary fa-solid" onclick="editCustomer(' + item._id + ')"><i class="fa fa-pen" aria-hidden="true"></i></a>';
                    object += '<a href="#"  id="IconButtonDel" class="btn btn-danger fa-solid" onclick="deleteCustomer(' + item._id + ' )"><i class="fa fa-trash" aria-hidden="true"></i></a>';
                    object += '</div>';
                    object += '</div>';
                    object += '</div>';
                    count++;
                });
                $('#CustomerCardView').html(object);
                if (count > 16) {
                    pagination();
                }
            },
            error: function () {

            }
        });
    }
    //Index Customer
    function CustomerShow() {
       
        $.ajax({
            url: '/Customer/CustomerIndex',
            type: 'GET',
            dataType: 'json',
            contentType: 'application/json;charset=utf-8;',
           
            success: function (result) {
                var object = '';
                var count = 0;
                $.each(result, function (index, item) {
                    object += '<div class="col-sm-3">';
                    object += '<div class="card">';
                    object += '<div class="card-body">';
                    object += '<div class="d-flex align-items-center">';
                    object += '<img src="/images/man.png" style="width: 30px; height: 30px;" />';
                    object += '<h5 class="card-title">'+ item._Name +'</h5>';
                    object += '</div>';
                    object += '<p class="card-text">' + item._Email + '</p>';
                    object += '<a href="#" class="btn btn-primary" onclick="viewCustomer(' + item._Id + ')"> + Details</a>';
                    object += '<a href="#" id="IconButtonRent" class="btn btn-success" onclick="createCustomerRent(' + item._Id + ', ' + item._TotalRent + ')">$</a>';
                    object += '<a href="#" id="IconButtonEdit" class="btn btn-primary fa-solid" onclick="editCustomer(' + item._Id + ')"><i class="fa fa-pen" aria-hidden="true"></i></a>';
                    object += '<a href="#"  id="IconButtonDel" class="btn btn-danger fa-solid" onclick="deleteCustomer(' + item._Id + ' )"><i class="fa fa-trash" aria-hidden="true"></i></a>';
                    object += '</div>';
                    object += '</div>';
                    object += '</div>'; 
                    count++;
                });
                $('#CustomerCardView').html(object);
                if (count > 16) {
                    pagination();
                }
            },
            error: function () {
               
            }
        });
    }
    //Pagination
    function pagination() {
        var cards = $('.card');
        var cardsPerPage = 16; // Number of cards to show per page

        var totalCards = cards.length;
        if (totalCards <= cardsPerPage) {
            // No need for pagination if the total cards do not exceed the limit
            return;
        }

        var totalPages = Math.ceil(totalCards / cardsPerPage);

        // Clear existing pagination links
        $('#pagination').empty();

        for (var i = 1; i <= totalPages; i++) {
            $('#pagination').append('<li class="page-item"><a class="page-link" href="#">' + i + '</a></li>');
        }

        // Show the first page by default
        showPage(1);

        // Handle click event on pagination links
        $('#pagination').on('click', 'li.page-item', function () {
            var pageNumber = $(this).text();
            showPage(pageNumber);
        });

        function showPage(pageNumber) {
            var startIndex = (pageNumber - 1) * cardsPerPage;
            var endIndex = startIndex + cardsPerPage;
            cards.hide().slice(startIndex, endIndex).show();

            // Update active state of pagination links
            $('#pagination li.page-item').removeClass('active');
            $('#pagination li.page-item:eq(' + (pageNumber - 1) + ')').addClass('active');
        }
    }
    //Create Customer

    $('#addCustomerid').click(function () {
        $('#AddCustomerBTN').show();
        $('#UpdateCustomerBTN').hide();
        $('#Customerheading').text('Add Customer');
        createCustomer();
    })

    function createCustomer() {
        cleartextbox();
        $('#createCustomerWindow').modal('show');
    }
    function createCustomerDetails() {
        $('#createCustomerWindowDetails').modal('show');
    }
    function closeModal() {
        $('#createCustomerWindow').modal('hide');
    }
    function closeModalDetails() {
        $('#createCustomerWindowDetails').modal('hide');
    }
    function cleartextbox() {
        //$('#popupId').val('');
        $('#popupName').val('');
        $('#popupAddress').val('');
        $('#popupContactNo').val('');
        $('#popupEmail').val('');
        $('#popupTotalRent').val('');
        $('#popuprentType').val('');
    }
    function saveRent() {

        var type = $('#popupPaymentType').val();
        var date = $('#popupPaymentDate').val();
        var duedate = $('#popupDueDate').val();
        // Check if any field is empty
        if (!date){
            alert('Please fill in all the fields.');
            return;
        }

        $.ajax({
            url: '/Rent/Create',
            type: 'POST',
            data: {
                _CustomerId: customerid,
                _Amount: Totalrent,
                _PaymentDate: date,
                _Type: type
               
            },
            success: function () {
                
            },
            error: function () {
                // Handle error
            }
        });
        $.ajax({
            url: '/Customer/UpdatethroughRent',
            type: 'POST',
            data: {
                id: customerid,
                Nextdate: duedate
            },
            success: function () {
                CustomerShow();
                closeModalRent();
            },
            error: function () {
                // Handle error
            }
        });
    }
    function saveCustomer() {
        var name = $('#popupName').val();
        var address = $('#popupAddress').val();
        var contactNo = $('#popupContactNo').val();
        var email = $('#popupEmail').val();
        var TotalRent = $('#popupTotalRent').val();
        var RentType = $('#popuprentType').val();
        // Check if any field is empty
        if (!name || !address || !contactNo || !email || !TotalRent || !RentType) {
            alert('Please fill in all the fields.');
            return;
        }

        $.ajax({
            url: '/Customer/Create',
            type: 'POST',
            data: {
                _Name: name,
                _Address: address,
                _ContactNo: contactNo,
                _Email: email,
                _TotalRent: TotalRent,
                _TypeOfRent: RentType
            },
            success: function () {
                cleartextbox();
                CustomerShow();
                closeModal();
            },
            error: function () {
                // Handle error
            }
        });
    }

    //Delete Customer
    function deleteCustomer(id) {
        if (confirm('Are you sure you want to remove this Customer?')) {
            $.ajax({
                url: '/Customer/Delete?id=' + id,
                success: function () {
                    CustomerShow();
                },
                error: function () {
                   
                }
            });
        }


    }
    //View Customer
    function viewCustomer(id) {
        $.ajax({
            url: '/Customer/Edit?id=' + id,
            type: 'GET',
            success: function (response) {
                createCustomerDetails();
                $('#popupIdDetails').text(response._id);
                $('#popupNameDetails').text('Name : ' + response._Name);
                $('#popupAddressDetails').text('Address : ' + response._Address);
                $('#popupContactNoDetails').text('Phone Number : ' + response._ContactNo);
                $('#popupEmailDetails').text('Email : ' + response._Email);
                $('#popupTotalRentDetails').text('Rent : $' + response._TotalRent+'/-');
                $('#popuprentTypeDetails').text('Rent Category : ' + response._TypeOfRent);
                var onlydate = response._NextDueDate.split("T")[0];
                $('#popupDueDateDetails').text('Due Date : ' + onlydate);
                
                //can work with both css and hide function---same result
                //$('#AddCustomerBTN').css('display','none');
                //$('#UpdateCustomerBTN').css('display', 'block');

                $('#AddCustomerBTN').hide();
                $('#UpdateCustomerBTN').hide();
                $('#CloseCustomerBTN').show();
                $('#Customerheading').text('Customer Information');
                CustomerShow();
            },
            error: function () {
            
            }
        });
    }
    //Edit Customer
    function editCustomer(id) {
        $.ajax({
            url: '/Customer/Edit?id=' + id,
            type: 'GET',
            success: function (response) {
                createCustomer();
                $('#popupId').val(response._id);
                $('#popupName').val(response._Name);
                $('#popupAddress').val(response._Address);
                $('#popupContactNo').val(response._ContactNo);
                $('#popupEmail').val(response._Email);
                //can work with both css and hide function---same result
                //$('#AddCustomerBTN').css('display','none');
                //$('#UpdateCustomerBTN').css('display', 'block');

                $('#AddCustomerBTN').hide();
                $('#UpdateCustomerBTN').show();
                $('#Customerheading').text('Update Customer');
                CustomerShow();
            },
            error: function () {
             
            }
        });
    }

    function updateCustomer() {

        var id = $('#popupId').val();
        var name = $('#popupName').val();
        var address = $('#popupAddress').val();
        var contactNo = $('#popupContactNo').val();
        var email = $('#popupEmail').val();
        var TotalRent = $('#popupTotalRent').val();
        var RentType = $('#popuprentType').val();

        if (!id || !name || !address || !contactNo || !email || !TotalRent || !RentType) {
            alert('Please fill in all the required fields.');
            return;
        }

        $.ajax({
            url: '/Customer/Update',
            type: 'POST',
            data: {
                _id: id,
                _Name: name,
                _Address: address,
                _ContactNo: ContactNo,
                _Email: email,
                _TotalRent: TotalRent,
                _TypeOfRent: RentType
            },
            success: function () {
                cleartextbox();
                CustomerShow();
                closeModal();
            },
            error: function () {
          
            }
        });
    }

</script>*@